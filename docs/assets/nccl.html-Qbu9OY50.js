import{_ as n,c as s,o as a,a as e}from"./app-CJliYRxs.js";const l={},i=e(`<div class="hint-container tip"><p class="hint-container-title">nccl</p></div><h2 id="nccl" tabindex="-1"><a class="header-anchor" href="#nccl"><span>nccl</span></a></h2><p>NCCL是一款独立的库，提供标准的 GPU 通信例程，支持全规约（all-reduce）、全收集（all-gather）、规约（reduce）、广播（broadcast）、规约并散播（reduce-scatter）以及任意基于发送/接收的通信模式。该库经过优化，能够在使用 PCIe、NVLink、NVSwitch 以及基于 InfiniBand Verbs 或 TCP/IP 套接字的网络平台上实现高带宽。NCCL 支持任意数量的 GPU，无论是安装在单节点还是跨多个节点的系统中，并且可以在单进程或多进程（如 MPI）应用程序中使用。</p><h3 id="下载源码" tabindex="-1"><a class="header-anchor" href="#下载源码"><span>下载源码</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>git clone https://github.com/NVIDIA/nccl-tests.git</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="构建编译" tabindex="-1"><a class="header-anchor" href="#构建编译"><span>构建编译</span></a></h3><ul><li><p>修改换行格式 LF</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>src\\device\\generate.py</span></span>
<span class="line"><span></span></span>
<span class="line"><span>src\\device\\Makefile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>编译并安装</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span> make -j src.build</span></span>
<span class="line"><span> make install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>构建产物如下</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>├── include</span></span>
<span class="line"><span>│   ├── nccl.h</span></span>
<span class="line"><span>│   └── nccl_net.h</span></span>
<span class="line"><span>├── lib</span></span>
<span class="line"><span>    ├── libnccl.so -&gt; libnccl.so.2</span></span>
<span class="line"><span>    ├── libnccl.so.2 -&gt; libnccl.so.2.23.4</span></span>
<span class="line"><span>    ├── libnccl.so.2.23.4</span></span>
<span class="line"><span>    ├── libnccl_static.a</span></span>
<span class="line"><span>    └── pkgconfig</span></span>
<span class="line"><span>        └── nccl.pc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="nccl-test" tabindex="-1"><a class="header-anchor" href="#nccl-test"><span>nccl-test</span></a></h2><h3 id="下载" tabindex="-1"><a class="header-anchor" href="#下载"><span>下载</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>git clone https://github.com/NVIDIA/nccl-tests.git</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="编译" tabindex="-1"><a class="header-anchor" href="#编译"><span>编译</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>cd nccl-tests </span></span>
<span class="line"><span>make</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="运行" tabindex="-1"><a class="header-anchor" href="#运行"><span>运行</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>export NCCL_DEBUG=TRACE</span></span>
<span class="line"><span>./build/all_reduce_perf -b 8 -e 8M -f 2 -g 1</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>(base) root@DESKTOP-P54EAF3:/mnt/d/Code/nccl-tests# ./build/all_reduce_perf -b 8 -e 8M -f 2 -g 1</span></span>
<span class="line"><span># nThread 1 nGpus 1 minBytes 8 maxBytes 8388608 step: 2(factor) warmup iters: 5 iters: 20 agg iters: 1 validation: 1 graph: 0</span></span>
<span class="line"><span>#</span></span>
<span class="line"><span># Using devices</span></span>
<span class="line"><span>#  Rank  0 Group  0 Pid  58239 on DESKTOP-P54EAF3 device  0 [0x01] NVIDIA GeForce GTX 1660 SUPER</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58239 [0] NCCL INFO Bootstrap : Using eth0:172.26.190.235&lt;0&gt;</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58239 [0] NCCL INFO cudaDriverVersion 12050</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58239 [0] NCCL INFO NCCL version 2.23.4+cuda12.1</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO NET/Plugin: Could not find: libnccl-net.so. Using internal network plugin.</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Failed to open libibverbs.so[.1]</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO NET/Socket : Using [0]eth0:172.26.190.235&lt;0&gt; [1]br-eaee979aadb0:172.19.0.1&lt;0&gt; [2]vethd14a450:fe80::c821:6bff:fea5:dcf9%vethd14a450&lt;0&gt; [3]vethc5ec3b7:fe80::74f5:23ff:fe0a:3d6d%vethc5ec3b7&lt;0&gt;</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO PROFILER/Plugin: Could not find: libnccl-profiler.so.</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Using network Socket</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO ncclCommInitAll comm 0x559205409610 rank 0 nranks 1 cudaDev 0 nvmlDev 0 busId 1000 commId 0x89b784d33d72ebbb - Init START</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Bootstrap timings total 0.000344 (create 0.000019, send 0.000105, recv 0.000096, ring 0.000000, delay 0.000000)</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO comm 0x559205409610 rank 0 nRanks 1 nNodes 1 localRanks 1 localRank 0 MNNVL 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 00/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 01/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 02/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 03/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 04/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 05/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 06/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 07/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 08/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 09/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 10/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 11/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 12/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 13/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 14/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 15/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 16/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 17/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 18/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 19/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 20/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 21/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 22/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 23/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 24/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 25/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 26/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 27/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 28/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 29/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 30/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Channel 31/32 : 0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Trees [0] -1/-1/-1-&gt;0-&gt;-1 [1] -1/-1/-1-&gt;0-&gt;-1 [2] -1/-1/-1-&gt;0-&gt;-1 [3] -1/-1/-1-&gt;0-&gt;-1 [4] -1/-1/-1-&gt;0-&gt;-1 [5] -1/-1/-1-&gt;0-&gt;-1 [6] -1/-1/-1-&gt;0-&gt;-1 [7] -1/-1/-1-&gt;0-&gt;-1 [8] -1/-1/-1-&gt;0-&gt;-1 [9] -1/-1/-1-&gt;0-&gt;-1 [10] -1/-1/-1-&gt;0-&gt;-1 [11] -1/-1/-1-&gt;0-&gt;-1 [12] -1/-1/-1-&gt;0-&gt;-1 [13] -1/-1/-1-&gt;0-&gt;-1 [14] -1/-1/-1-&gt;0-&gt;-1 [15] -1/-1/-1-&gt;0-&gt;-1 [16] -1/-1/-1-&gt;0-&gt;-1 [17] -1/-1/-1-&gt;0-&gt;-1 [18] -1/-1/-1-&gt;0-&gt;-1 [19] -1/-1/-1-&gt;0-&gt;-1 [20] -1/-1/-1-&gt;0-&gt;-1 [21] -1/-1/-1-&gt;0-&gt;-1 [22] -1/-1/-1-&gt;0-&gt;-1 [23] -1/-1/-1-&gt;0-&gt;-1 [24] -1/-1/-1-&gt;0-&gt;-1 [25] -1/-1/-1-&gt;0-&gt;-1 [26] -1/-1/-1-&gt;0-&gt;-1 [27] -1/-1/-1-&gt;0-&gt;-1 [28] -1/-1/-1-&gt;0-&gt;-1 [29] -1/-1/-1-&gt;0-&gt;-1 [30] -1/-1/-1-&gt;0-&gt;-1 [31] -1/-1/-1-&gt;0-&gt;-1</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO P2P Chunksize set to 131072</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58246 [0] NCCL INFO [Proxy Service] Device 0 CPU core 8</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58247 [0] NCCL INFO [Proxy Service UDS] Device 0 CPU core 11</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58248 [0] NCCL INFO [Proxy Progress] Device 0 CPU core 14</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO 32 coll channels, 32 collnet channels, 0 nvls channels, 32 p2p channels, 32 p2p channels per peer</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO CC Off, Multi-GPU CC Off, workFifoBytes 1048576</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO TUNER/Plugin: Could not find: libnccl-tuner.so libnccl-net.so. Using internal tuner plugin.</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO ncclCommInitAll comm 0x559205409610 rank 0 nranks 1 cudaDev 0 nvmlDev 0 busId 1000 commId 0x89b784d33d72ebbb - Init COMPLETE</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58245 [0] NCCL INFO Init timings - ncclCommInitAll: rank 0 nranks 1 total 0.22 (kernels 0.15, alloc 0.05, bootstrap 0.00, allgathers 0.00, topo 0.00, graphs 0.00, connections 0.01, rest 0.00) </span></span>
<span class="line"><span>#</span></span>
<span class="line"><span>#                                                              out-of-place                       in-place</span></span>
<span class="line"><span>#       size         count      type   redop    root     time   algbw   busbw #wrong     time   algbw   busbw #wrong</span></span>
<span class="line"><span>#        (B)    (elements)                               (us)  (GB/s)  (GB/s)            (us)  (GB/s)  (GB/s)</span></span>
<span class="line"><span>           8             2     float     sum      -1     9.32    0.00    0.00      0     0.14    0.06    0.00      0</span></span>
<span class="line"><span>          16             4     float     sum      -1    14.29    0.00    0.00      0     0.15    0.11    0.00      0</span></span>
<span class="line"><span>          32             8     float     sum      -1    12.24    0.00    0.00      0     0.15    0.22    0.00      0</span></span>
<span class="line"><span>          64            16     float     sum      -1    14.00    0.00    0.00      0     0.15    0.44    0.00      0</span></span>
<span class="line"><span>         128            32     float     sum      -1    11.98    0.01    0.00      0     1.06    0.12    0.00      0</span></span>
<span class="line"><span>         256            64     float     sum      -1    11.72    0.02    0.00      0     0.15    1.71    0.00      0</span></span>
<span class="line"><span>         512           128     float     sum      -1    13.87    0.04    0.00      0     0.15    3.53    0.00      0</span></span>
<span class="line"><span>        1024           256     float     sum      -1    13.81    0.07    0.00      0     0.15    6.83    0.00      0</span></span>
<span class="line"><span>        2048           512     float     sum      -1    17.77    0.12    0.00      0     0.15   13.65    0.00      0</span></span>
<span class="line"><span>        4096          1024     float     sum      -1    14.04    0.29    0.00      0     0.15   28.25    0.00      0</span></span>
<span class="line"><span>        8192          2048     float     sum      -1    13.54    0.61    0.00      0     0.15   54.61    0.00      0</span></span>
<span class="line"><span>       16384          4096     float     sum      -1    11.61    1.41    0.00      0     0.15  109.23    0.00      0</span></span>
<span class="line"><span>       32768          8192     float     sum      -1    13.64    2.40    0.00      0     0.15  218.45    0.00      0</span></span>
<span class="line"><span>       65536         16384     float     sum      -1    15.48    4.23    0.00      0     0.13  504.12    0.00      0</span></span>
<span class="line"><span>      131072         32768     float     sum      -1    23.09    5.68    0.00      0     0.13  1008.25    0.00      0</span></span>
<span class="line"><span>      262144         65536     float     sum      -1    25.09   10.45    0.00      0     0.14  1872.46    0.00      0</span></span>
<span class="line"><span>      524288        131072     float     sum      -1    26.29   19.94    0.00      0     0.15  3615.78    0.00      0</span></span>
<span class="line"><span>     1048576        262144     float     sum      -1    20.98   49.98    0.00      0     0.16  6553.60    0.00      0</span></span>
<span class="line"><span>     2097152        524288     float     sum      -1    26.15   80.20    0.00      0     0.16  13530.01    0.00      0</span></span>
<span class="line"><span>     4194304       1048576     float     sum      -1    37.97  110.46    0.00      0     0.15  27962.03    0.00      0</span></span>
<span class="line"><span>     8388608       2097152     float     sum      -1    66.97  125.27    0.00      0     0.14  59918.63    0.00      0</span></span>
<span class="line"><span>DESKTOP-P54EAF3:58239:58239 [0] NCCL INFO comm 0x559205409610 rank 0 nranks 1 cudaDev 0 busId 1000 - Destroy COMPLETE</span></span>
<span class="line"><span># Out of bounds values : 0 OK</span></span>
<span class="line"><span># Avg bus bandwidth    : 0</span></span>
<span class="line"><span>#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="参数" tabindex="-1"><a class="header-anchor" href="#参数"><span>参数</span></a></h3><p>所有测试支持相同的一组参数：</p><ul><li>GPU 数量 <ul><li><code>-t,--nthreads &lt;线程数&gt;</code> 每个进程的线程数。默认值：1。</li><li><code>-g,--ngpus &lt;每个线程的 GPU 数量&gt;</code> 每个线程使用的 GPU 数量。默认值：1。</li></ul></li><li>扫描的大小范围 <ul><li><code>-b,--minbytes &lt;最小字节数&gt;</code> 开始的最小大小。默认值：32M。</li><li><code>-e,--maxbytes &lt;最大字节数&gt;</code> 结束的最大大小。默认值：32M。</li><li>递增方式可以是固定递增或乘法因子。仅应使用其中一种方式： <ul><li><code>-i,--stepbytes &lt;递增字节数&gt;</code> 各大小之间的固定增量。默认值：1M。</li><li><code>-f,--stepfactor &lt;递增因子&gt;</code> 各大小之间的乘法因子。默认值：禁用。</li></ul></li></ul></li><li>NCCL 操作参数 <ul><li><code>-o,--op &lt;sum/prod/min/max/avg/all&gt;</code> 指定执行哪种规约操作。仅对 Allreduce、Reduce 或 ReduceScatter 等规约操作有效。默认值：Sum（求和）。</li><li><code>-d,--datatype &lt;nccltype/all&gt;</code> 指定使用哪种数据类型。默认值：Float（浮点数）。</li><li><code>-r,--root &lt;root/all&gt;</code> 指定使用哪个 root，仅对有 root 的操作（如广播或规约）有效。默认值：0。</li></ul></li><li>性能参数 <ul><li><code>-n,--iters &lt;迭代次数&gt;</code> 迭代次数。默认值：20。</li><li><code>-w,--warmup_iters &lt;预热迭代次数&gt;</code> 预热迭代次数（不计时）。默认值：5。</li><li><code>-m,--agg_iters &lt;聚合次数&gt;</code> 每次迭代中聚合在一起的操作次数。默认值：1。</li><li><code>-N,--run_cycles &lt;循环次数&gt;</code> 运行并打印每个循环。默认值：1；0=无限循环。</li><li><code>-a,--average &lt;0/1/2/3&gt;</code> 将性能报告为所有节点的平均值（仅适用于 MPI=1）。&lt;0=Rank0, 1=平均, 2=最小, 3=最大&gt;。默认值：1（平均）。</li></ul></li><li>测试操作 <ul><li><code>-p,--parallel_init &lt;0/1&gt;</code> 使用线程并行初始化 NCCL。默认值：0。</li><li><code>-c,--check &lt;检查迭代次数&gt;</code> 执行指定次数的迭代，每次迭代都检查结果的正确性。对于大量 GPU 来说，这可能非常慢。默认值：1。</li><li><code>-z,--blocking &lt;0/1&gt;</code> 使 NCCL 操作阻塞，即在每次操作后等待并同步 CPU。默认值：0。</li><li><code>-G,--cudagraph &lt;CUDA 图启动次数&gt;</code> 将迭代捕获为 CUDA 图，然后重复指定次数。默认值：0。</li><li><code>-C,--report_cputime &lt;0/1&gt;</code> 报告 CPU 时间而非延迟。默认值：0。</li><li><code>-R,--local_register &lt;1/0&gt;</code> 在发送/接收缓冲区上启用本地缓冲区注册。默认值：0。</li><li><code>-T,--timeout &lt;超时时间（秒）&gt;</code> 在指定秒数后对每个测试进行超时。默认值：禁用。</li></ul></li></ul>`,17),c=[i];function p(t,d){return a(),s("div",null,c)}const o=n(l,[["render",p],["__file","nccl.html.vue"]]),v=JSON.parse('{"path":"/%E6%8A%80%E6%9C%AF%E7%A7%91%E6%99%AE/nccl.html","title":"nccl","lang":"zh-CN","frontmatter":{"date":"2024-10-08T00:00:00.000Z","title":"nccl","category":["nccl"],"tag":["nccl"],"description":"nccl nccl NCCL是一款独立的库，提供标准的 GPU 通信例程，支持全规约（all-reduce）、全收集（all-gather）、规约（reduce）、广播（broadcast）、规约并散播（reduce-scatter）以及任意基于发送/接收的通信模式。该库经过优化，能够在使用 PCIe、NVLink、NVSwitch 以及基于 Infi...","head":[["meta",{"property":"og:url","content":"https://mousesun846.github.io/KnowledgeBlog/KnowledgeBlog/%E6%8A%80%E6%9C%AF%E7%A7%91%E6%99%AE/nccl.html"}],["meta",{"property":"og:site_name","content":"知识笔记"}],["meta",{"property":"og:title","content":"nccl"}],["meta",{"property":"og:description","content":"nccl nccl NCCL是一款独立的库，提供标准的 GPU 通信例程，支持全规约（all-reduce）、全收集（all-gather）、规约（reduce）、广播（broadcast）、规约并散播（reduce-scatter）以及任意基于发送/接收的通信模式。该库经过优化，能够在使用 PCIe、NVLink、NVSwitch 以及基于 Infi..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-08T09:08:36.000Z"}],["meta",{"property":"article:author","content":"MouseSun"}],["meta",{"property":"article:tag","content":"nccl"}],["meta",{"property":"article:published_time","content":"2024-10-08T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-10-08T09:08:36.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"nccl\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-10-08T00:00:00.000Z\\",\\"dateModified\\":\\"2024-10-08T09:08:36.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MouseSun\\",\\"url\\":\\"https://github.com/MouseSun846\\",\\"email\\":\\"\\"}]}"]]},"headers":[{"level":2,"title":"nccl","slug":"nccl","link":"#nccl","children":[{"level":3,"title":"下载源码","slug":"下载源码","link":"#下载源码","children":[]},{"level":3,"title":"构建编译","slug":"构建编译","link":"#构建编译","children":[]}]},{"level":2,"title":"nccl-test","slug":"nccl-test","link":"#nccl-test","children":[{"level":3,"title":"下载","slug":"下载","link":"#下载","children":[]},{"level":3,"title":"编译","slug":"编译","link":"#编译","children":[]},{"level":3,"title":"运行","slug":"运行","link":"#运行","children":[]},{"level":3,"title":"参数","slug":"参数","link":"#参数","children":[]}]}],"git":{"createdTime":1728378516000,"updatedTime":1728378516000,"contributors":[{"name":"mousesun","email":"3026098675@qq.com","commits":1}]},"readingTime":{"minutes":6.92,"words":2075},"filePathRelative":"技术科普/nccl.md","localizedDate":"2024年10月8日","excerpt":"<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">nccl</p>\\n</div>\\n<h2>nccl</h2>\\n<p>NCCL是一款独立的库，提供标准的 GPU 通信例程，支持全规约（all-reduce）、全收集（all-gather）、规约（reduce）、广播（broadcast）、规约并散播（reduce-scatter）以及任意基于发送/接收的通信模式。该库经过优化，能够在使用 PCIe、NVLink、NVSwitch 以及基于 InfiniBand Verbs 或 TCP/IP 套接字的网络平台上实现高带宽。NCCL 支持任意数量的 GPU，无论是安装在单节点还是跨多个节点的系统中，并且可以在单进程或多进程（如 MPI）应用程序中使用。</p>","autoDesc":true}');export{o as comp,v as data};
